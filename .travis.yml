language: php

env:
  - CODECLIMATE_REPO_TOKEN=20d76bff65cdc35b5d3450847800ecc6d5646842b55fe9b433cee1da0fa012ba

php:
  - 5.5
  - 5.6
  - 7.0
  - hhvm
  - hhvm-nightly

before_script:
  - composer self-update
  - sudo apt-get update -qq
#  - sudo apt-get install -qq zend-framework
  - mysql < tests/data/travis/db.structure.sql

after_script:
  - ./lib/vendor/bin/test-reporter

script: 
  - composer install
  - phpunit

services:
  - redis-server
  - memcached
 
matrix:
  fast_finish: true
  allow_failures:
    - php: hhvm-nightly
#    - php: hhvm
#    - php: 7.0

install:
  - tests/data/travis/memcached-setup.sh